// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Client{
  id String @id @map("_id") @db.ObjectId @default(auto())
  fullName String
  phoneNumber BigInt @unique
  password String
  address String @default("")
  joinedDate DateTime @default(now())
  ordersDone Order[]
}


model Product{
  id String @id @map("_id") @db.ObjectId @default(auto())
  name String 
  description Description[]
  actualPrice Int
  hikedPrice Int
  drop Drop @relation(fields: [dropId], references: [id])
  dropId String @db.ObjectId
  category String[]
  stock Stock[]
  createdAt DateTime @default(now())
  updatedAt DateTime?
  endedAt DateTime?
}


model Drop{
  id String @id @db.ObjectId @map("_id") @default(auto())
  name String
  description String
  imageUrl String
  salesOrders Int @default(0)
  createdBy String
  createdAt DateTime @default(now())
  active Boolean @default(false)
  updatedAt DateTime @default(now())
  endedAt DateTime?
  products Product[]
}


model Declarations{
  id String @id @map("_id") @db.ObjectId @default(auto())
  title String
  description String
  page String
  createdBy String
  createdAt DateTime @default(now())
}

model Stock{
  id String @id @map("_id") @db.ObjectId @default(auto())
  productId String @db.ObjectId
  product Product @relation(fields: [productId], references: [id])
  imageUrl String[]
  color String
  size String[]
  quantity Int
  createdAt DateTime @default(now())
  updatedAt DateTime?
  salesOrder Order[]
}


model Order{
  id String @id @map("_id") @db.ObjectId @default(auto())
  stock Stock @relation(fields: [stockOrdered], references: [id])
  stockOrdered String @db.ObjectId
  client Client @relation(fields: [orderedBy], references: [id])
  orderedBy String @db.ObjectId
  quantity Int
  totalPrice Int
  createdAt DateTime @default(now())
  status String @default("PENDING")
  delievered Boolean @default(false)
}


type Description{
  type Boolean 
}
